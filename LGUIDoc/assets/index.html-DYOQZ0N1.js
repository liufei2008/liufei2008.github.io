import{_ as n,r as s,c as l,b as e,d as t,e as o,w as r,a as i,o as c}from"./app-CGRYBoMb.js";const d="/LGUIDoc/assets/1-Cw4Xkdx7.png",p="/LGUIDoc/assets/2-Cb7ZrpWC.png",h="/LGUIDoc/assets/3-ChHpQmz-.png",f="/LGUIDoc/assets/4-C-08FjGA.png",u="/LGUIDoc/assets/5-B5JLkGFk.png",b="/LGUIDoc/assets/PrefabEditor_1-BWhPept1.png",m="/LGUIDoc/assets/PrefabEditor_2-uWaEDKYG.png",g="/LGUIDoc/assets/PrefabEditor_3-DlKTn7t9.png",P="/LGUIDoc/assets/PrefabEditor_4-DesJVA3s.png",v="/LGUIDoc/assets/PrefabEditor_5-B1apMoCh.png",w="/LGUIDoc/assets/LevelEditor_1-J225Xrz2.png",_="/LGUIDoc/assets/LevelEditor_2-D5cbW8T0.png",y="/LGUIDoc/assets/RuntimeUse_1-CKwsU5_9.png",L="/LGUIDoc/assets/RuntimeUse_2-Sw_U2-M2.png",U="/LGUIDoc/assets/RuntimeUse_3-67HbC1ds.png",I="/LGUIDoc/assets/RuntimeUse_4-BWWTXbyB.png",q="/LGUIDoc/assets/RuntimeUse_5-Y_wtRKx6.png",G="/LGUIDoc/assets/RuntimeUse_6-CeVVuox9.png",C="/LGUIDoc/assets/RuntimeUse_7-CvcrXPpx.png",k="/LGUIDoc/assets/NestedPrefab_1-rhVgCUwF.png",D="/LGUIDoc/assets/NestedPrefab_2-DyJ6pv2o.png",A="/LGUIDoc/assets/NestedPrefab_3-D12Mhz4Y.png",E="/LGUIDoc/assets/NestedPrefab_4-DMLhVCvs.png",x={},B=i('<h1 id="lgui-prefab" tabindex="-1"><a class="header-anchor" href="#lgui-prefab"><span>LGUI Prefab</span></a></h1><p>Prefabs are collections of actors that can be stored in an asset and instanced into a level, it is not limited on UI element, you can use almost all actor types in LGUIPrefab.</p><p>Quite often when constructing a level you want to create some arrangement of actors, and then re-use that collection in the same or other levels. An example might be a torch, which consists of some static meshes and some lights. Prefabs allows you to create this kind of collection once, and then save it in as a Prefab asset. You can then select the Prefab in the Content Browser, and add it many times through the level.</p><p>Prefabs can have changes made to them in a level, and those changes can then be propagated to all existing instances of that Prefab. Because this uses Unreal&#39;s property system, only properties still at their original prefab defaults will be updated when the Prefab changes. For example, imagine you have a Prefab that contains a yellow light, and you then change one instance of the Prefab to have a blue light. Then you change the Prefab itself to have a green light. Only instances who&#39;s light is still yellow will have the color changed to green. This is very useful, as it allows you modify, or even remove, parts of a Prefab instance to make it fit a particular usage, but also receive updates to the Prefab.</p><h2 id="create-a-prefab" tabindex="-1"><a class="header-anchor" href="#create-a-prefab"><span>Create a Prefab</span></a></h2><p>To create a new Prefab, first attach the actors to a single root actor in the level:<br><img src="'+d+'" alt=""> Then select the root actor, right-click on LGUI column and choose <strong>Create Prefab</strong> from the context menu.<br><img src="'+p+'" alt=""> Then a dialog window will show, you can choose a place and name to save the asset:<br><img src="'+h+'" alt=""> Click &quot;Save&quot; and then a Prefab asset will appear in content folder, and the actors of this prefab will show &quot;Prefab&quot; icon on the LGUI column:<br><img src="'+f+'" alt=""> Now we can delete the actors in level. Right-click on LGUI column of root actor and choose &quot;Destroy Actors&quot;:<br><img src="'+u+'" alt=""></p><h2 id="edit-prefab" tabindex="-1"><a class="header-anchor" href="#edit-prefab"><span>Edit Prefab</span></a></h2><p>There are two ways to eidt/modify existing prefabs.</p><h3 id="edit-prefab-in-lgui-prefab-editor" tabindex="-1"><a class="header-anchor" href="#edit-prefab-in-lgui-prefab-editor"><span>Edit Prefab in LGUI-Prefab-Editor</span></a></h3><p>Just double-click the Prefab asset and will bring-up a LGUI-Prefab-Editor window: <img src="'+b+'" alt=""><em>LGUI will automatically create a root actor named &quot;[temporary_RootAgent]&quot;, as the name means this actor is temporary created just as a root holder.</em><br> In the LGUI-Prefab-Editor window, you can do anything you want to edit/modify the prefab. Lets edit something for example.</p><p>Select &quot;Cube&quot; actor and right-click on LGUI column then select &quot;Create Actor&quot;-&gt;&quot;All Actors&quot; then typein &quot;StaticMesh&quot;, this will create a StaticMeshActor under &quot;Cube&quot; actor:<br><img src="'+m+'" alt=""><img src="'+g+'" alt=""> Rename the actor to &quot;Sphere&quot; and assign a sphere static mesh to it:<br><img src="'+P+'" alt=""></p><p>Now the important part, click-on &quot;Apply&quot; button on the left-top size of the editor window:<br><img src="'+v+'" alt=""></p><p>The &quot;Apply&quot; button will save your changed properties to Prefab asset, so always rememeber to hit it.</p>',13),T=i('<h3 id="edit-prefab-in-level-editor" tabindex="-1"><a class="header-anchor" href="#edit-prefab-in-level-editor"><span>Edit Prefab in Level-Editor</span></a></h3><p>Drag your Prefab asset and drop it in Level-Editor&#39;s viewport, this will create an instance of the Prefab asset: <img src="'+w+'" alt=""><em>Note, if you select an actor in Level-Editor then drag-drop the Prefab, then the created Prefab instance will attach to the selected actor.</em></p><p>When edit a Prefab instance in Level-Editor, LGUI actually consider it as a Sub-Prefab, so features and limititions are same, see <em>Nested Prefab and Property Override</em> section below.</p><h3 id="delete-prefab-in-level-editor" tabindex="-1"><a class="header-anchor" href="#delete-prefab-in-level-editor"><span>Delete Prefab in Level-Editor</span></a></h3><p>Select the root actor of your Prefab instance in Level-Editor, then right click on LGUI column in outliner, and click &quot;Destroy Actors&quot;:<br><img src="'+_+'" alt=""></p><p><strong>NOTE!!! The &quot;Destroy Actors&quot; can destroy selected actors with it&#39;s attached children actors.</strong></p><h2 id="load-prefab-at-runtime" tabindex="-1"><a class="header-anchor" href="#load-prefab-at-runtime"><span>Load Prefab at runtime</span></a></h2><p>LGUIPrefab provide a some function to load it at runtime, you can easily call it in Blueprint and c++: <img src="'+y+'" alt=""><strong>LoadPrefab</strong>: Most commonly used function</p><ul><li>InParent: Provide a SceneComponent as parent, so the loaded Prefab&#39;s root actor will attach to the parent.</li><li>SetRelativeTransformToIdentity: true- Reset the loaded Prefab&#39;s root actor&#39;s transform value; false- Keep origin value. <strong>LoadPrefabWithTransform</strong>: Replace the loaded Prefab&#39;s root actor&#39;s transform value with provided one.<br><strong>LoadPrefabWithReplacement</strong>: This function give us an opportunity to replace the Prefab&#39;s referenced assets or class before load the Prefab. Useful in the case that, we create a PrefabA, and a component CompA at the root actor to manage the PrefabA, then we create a CompB which have the same properties as CompA, but with different function implementation, then we can use this function to load PrefabA and replace class from CompA to CompB; But remember, Prefab serialize depend on UProperty, so CompA and CompB must have same UProperty.</li><li>InReplaceAssetMap: Map from asset to another, maybe a static mesh.</li><li>InReplaceClassMap: Map from class to another, in the above example, we can map CompA to CompB.</li></ul><p>Lets have a test. Create a ActorBlueprint with name &quot;TestLoad&quot;, open it in BlueprintEditor, add variable with name &quot;Prefab&quot; and type &quot;LGUIPrefab&quot;, assign the Prefab asset we just created above, link the node like the shot: <img src="'+L+'" alt=""> Now drag the actor &quot;TestLoad&quot; to LevelEditor&#39;s viewport then hit play, you will see the Prefab is successfully loaded and attach to &quot;TestLoad&quot; actor: <img src="'+U+'" alt=""></p><h3 id="initialize-when-load-prefab-at-runtime" tabindex="-1"><a class="header-anchor" href="#initialize-when-load-prefab-at-runtime"><span>Initialize when load Prefab at runtime</span></a></h3><p>LGUIPrefab use it&#39;s own serialization policy and it is late than &quot;BeginPlay&quot; execution, so properties are not ready when &quot;BeginPlay&quot;, so a replacement for &quot;BeginPlay&quot; must use to do the initialization job.<br> LGUIPrefab provide two ways to achieve this:</p>',12),R=e("strong",null,"LGUILifeCycleBehaviour",-1),N=e("strong",null,"LGUIPrefabInterface",-1),S=i('<p>Lets have a test. Create a ActorComponent implement from LGUILifeCycleBehaviour with name &quot;TestInitialize&quot;, open it in BlueprintEditor, you will see &quot;Awake&quot; event is created by default: <img src="'+I+'" alt=""> Drag out from &quot;Awake&quot; and link a &quot;PrintString&quot; node: <img src="'+q+'" alt=""> Double click on your Prefab asset to open LGUI-Prefab-Editor, and drag TestInitialize component to any actor in prefab, then hit &quot;Apply&quot;: <img src="'+G+'" alt=""> Now hit play and you will see printed info right after the Prefab is loaded.</p><h3 id="delete-prefab-instance-at-runtime" tabindex="-1"><a class="header-anchor" href="#delete-prefab-instance-at-runtime"><span>Delete Prefab instance at runtime</span></a></h3><p>Prefab instance is just a collection of actors, so all we need to do is delete these actors. LGUI provide a simple function to do it &quot;Destroy Actor with Hierarchy&quot;, just use it with the loaded prefab&#39;s root actor: <img src="'+C+'" alt=""></p><h2 id="nested-prefab-and-property-override" tabindex="-1"><a class="header-anchor" href="#nested-prefab-and-property-override"><span>Nested Prefab and Property Override</span></a></h2><p>Nested Prefab means you can include Prefab instances inside other Prefabs. Nested Prefabs retain their links to their own Prefab Assets, while also forming part of another Prefab Asset.<br> How to create a nested Prefab? This is simple, double click on Prefab asset to open a LGUI-Prefab-Editor, click a actor to select it as parent, then drag another prefab to the LGUI-Prefab-Editor&#39;s viewport, then you will find a instance of Prefab is created inside LGUI-Prefab-Editor: <img src="'+k+'" alt=""> Prefab can maintain it&#39;s default property, and track changed property values for later <em>Apply</em> or <em>Revert</em>. For example, if I change the light color to red: <img src="'+D+'" alt=""> Goto Sub-Prefab&#39;s root Actor and right click LGUI column in outliner, you will find &quot;Prefab Override Properties&quot;, click it and you can see the modified property: <img src="'+A+'" alt=""> You can <em>Revert</em> the modified property to Sub-Prefab&#39;s default value, or <em>Apply</em> the value to change the Sub-Prefab&#39;s default value.</p><p>There are some limitations when edit Sub-Prefab:</p><ul><li>Can&#39;t delete or remove Actor.</li><li>Can&#39;t delete or remove ActorComponent.</li><li>Can&#39;t change Actor&#39;s attachement.</li></ul><p>If we try to attach a actor to another, a message will showup to prevent it: <img src="'+E+'" alt=""></p>',8);function z(W,M){const a=s("RouteLink");return c(),l("div",null,[B,e("p",null,[t("See "),o(a,{to:"/PrefabWorkflow/PrefabEditor/"},{default:r(()=>[t("PrefabEditor")]),_:1})]),T,e("ul",null,[e("li",null,[o(a,{to:"/PrefabWorkflow/LGUILifeCycleBehaviour/"},{default:r(()=>[R]),_:1}),t(": You can create a ActorComponent extend from LGUILifeCycleBehaviour, and attach the component to your actor inside Prefab.")]),e("li",null,[o(a,{to:"/PrefabWorkflow/LGUIPrefabInterface/"},{default:r(()=>[N]),_:1}),t(": Both Actor and ActorComponent can implement this interface.")])]),S])}const O=n(x,[["render",z],["__file","index.html.vue"]]),j=JSON.parse('{"path":"/PrefabWorkflow/Prefab/","title":"LGUI Prefab","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Create a Prefab","slug":"create-a-prefab","link":"#create-a-prefab","children":[]},{"level":2,"title":"Edit Prefab","slug":"edit-prefab","link":"#edit-prefab","children":[{"level":3,"title":"Edit Prefab in LGUI-Prefab-Editor","slug":"edit-prefab-in-lgui-prefab-editor","link":"#edit-prefab-in-lgui-prefab-editor","children":[]},{"level":3,"title":"Edit Prefab in Level-Editor","slug":"edit-prefab-in-level-editor","link":"#edit-prefab-in-level-editor","children":[]},{"level":3,"title":"Delete Prefab in Level-Editor","slug":"delete-prefab-in-level-editor","link":"#delete-prefab-in-level-editor","children":[]}]},{"level":2,"title":"Load Prefab at runtime","slug":"load-prefab-at-runtime","link":"#load-prefab-at-runtime","children":[{"level":3,"title":"Initialize when load Prefab at runtime","slug":"initialize-when-load-prefab-at-runtime","link":"#initialize-when-load-prefab-at-runtime","children":[]},{"level":3,"title":"Delete Prefab instance at runtime","slug":"delete-prefab-instance-at-runtime","link":"#delete-prefab-instance-at-runtime","children":[]}]},{"level":2,"title":"Nested Prefab and Property Override","slug":"nested-prefab-and-property-override","link":"#nested-prefab-and-property-override","children":[]}],"git":{"updatedTime":1715129183000,"contributors":[{"name":"lf2007hf","email":"707908214@qq.com","commits":3}]},"filePathRelative":"PrefabWorkflow/Prefab/index.md"}');export{O as comp,j as data};
